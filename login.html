<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Glow Focus System</title>
    <style>
        /* --- ŸÜŸÅÿ≥ ÿ≥ÿ™ÿßŸäŸÑ ÿßŸÑŸÑŸàÿ¨ŸÜ ÿ®ÿØŸàŸÜ ÿ™ÿ∫ŸäŸäÿ± --- */
        body {
            background-color: #000;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: 'Arial', sans-serif;
            overflow: hidden;
        }

        .login-card {
            background-color: #000;
            width: 340px;
            padding: 30px 20px;
            border-radius: 15px;
            border: 1px solid #1a0000;
            box-shadow: 0 0 35px rgba(255, 0, 0, 0.4);
            text-align: center;
            z-index: 1000;
        }

        .image-frame {
            width: 290px; height: 170px; margin: 0 auto 15px auto;
            border: 2.5px solid #fff; border-radius: 12px;
            box-shadow: 0 0 20px #fff; overflow: hidden; background-color: #000;
        }

        .image-frame img { width: 100%; height: 100%; object-fit: fill; display: block; }

        .limit-label { color: #8b0000; font-weight: bold; font-size: 14px; margin-bottom: 5px; display: block; }

        h2 { color: #fff; font-size: 34px; margin: 0 0 20px 0; font-weight: bold; }

        input {
            width: 100%; background-color: #000; border: 2px solid #2a0000;
            border-radius: 10px; padding: 14px; margin-bottom: 15px;
            color: #fff; box-sizing: border-box; outline: none;
            font-size: 16px; transition: all 0.3s ease;
        }

        input:hover, input:focus {
            border-color: #fff; box-shadow: 0 0 15px rgba(255, 255, 255, 0.4); color: #fff;
        }

        .login-btn {
            width: 100%; background-color: #cc0000; color: #fff; border: none;
            padding: 15px; border-radius: 10px; font-weight: bold; font-size: 18px;
            cursor: pointer; margin-top: 5px; transition: all 0.4s ease;
        }

        .login-btn:hover { background-color: #fff; color: #000; box-shadow: 0 0 25px #fff; }

        .footer { color: #666; font-size: 11px; margin-top: 25px; }
        .footer span { color: #8b0000; font-weight: bold; }

        /* --- ÿ≥ÿ™ÿßŸäŸÑ ÿßŸÑÿØÿßÿ¥ ÿ®Ÿàÿ±ÿØ --- */
        :root { --red: #ff0000; --dark: #050000; --text: #ffffff; }
        
        #main-dashboard { 
            display: none; /* ŸÖÿÆŸÅŸä ÿ≠ÿ™Ÿâ ÿ™ÿ≥ÿ¨ŸäŸÑ ÿßŸÑÿØÿÆŸàŸÑ */
            width: 100%; height: 100vh; background: var(--dark); color: var(--text);
        }

        .sidebar { width: 320px; background: #050000; border-right: 1px solid #1a0000; display: flex; flex-direction: column; padding: 30px 20px; z-index: 100; }
        
        .logo-frame-dash { 
            width: 100%; height: 150px; border: 2px solid var(--text); border-radius: 15px; 
            box-shadow: 0 0 25px var(--text); margin-bottom: 40px; overflow: hidden; background: #000;
        }
        .logo-frame-dash img { width: 100%; height: 100%; object-fit: fill; }

        .nav-link { padding: 16px; margin-bottom: 8px; border-radius: 12px; cursor: pointer; color: #666; font-weight: 800; display: flex; align-items: center; gap: 12px; }
        .nav-link:hover { background: #fff; color: #000; box-shadow: 0 0 40px #fff; transform: translateX(10px); }
        .nav-link.active { border-left: 4px solid var(--red); color: #fff; background: rgba(255,0,0,0.1); }

        .main-content { flex: 1; padding: 40px; overflow-y: auto; background: radial-gradient(circle at top right, #1a0000, #000); position: relative; display: block; }
        
        .header { display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid #222; padding-bottom: 20px; margin-bottom: 40px; }
        .header h1 { margin: 0; font-size: 45px; text-transform: uppercase; letter-spacing: 2px; }

        .grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap: 30px; }
        
        .folder-card { 
            background: linear-gradient(145deg, rgba(255,255,255,0.05), rgba(255,255,255,0.01));
            border: 1px solid rgba(255,255,255,0.1); border-radius: 24px; padding: 20px; 
            text-align: center; cursor: pointer; position: relative; backdrop-filter: blur(15px);
        }
        .folder-card:hover { transform: translateY(-15px); border-color: var(--red); box-shadow: 0 20px 40px rgba(255,0,0,0.15); }
        .card-icon { font-size: 60px; margin-bottom: 20px; display: block; }

        .kill-vid { width: 100%; height: 160px; border-radius: 15px; object-fit: cover; margin-bottom: 15px; border: 2px solid #222; }
        .btn { border: none; padding: 10px; border-radius: 8px; cursor: pointer; font-weight: bold; width: 100%; margin-top: 5px; }
        .action-btn { background: #fff; color: #000; padding: 15px 40px; border-radius: 50px; width: auto; font-weight: 900; }
        .action-btn:hover { background: var(--red); color: #fff; transform: scale(1.1); }
        
        .btn-dl { background: #111; color: #fff; border: 1px solid #333; }
        .btn-dl:hover { background: #fff; color: #000; }
        .btn-link { background: var(--red); color: #fff; margin-top: 10px; }
        .btn-del { color: var(--red); background: transparent; font-size: 12px; margin-top: 10px; }

        .back-link { color: var(--red); font-weight: bold; cursor: pointer; margin-bottom: 20px; display: block; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div id="login-container">
        <div class="login-card">
            <div class="image-frame">
                <img src="dmg.logo.png" alt="logo">
            </div>
            <span class="limit-label">Limit Extremely</span>
            <h2>Login</h2>
            <input type="text" id="username" placeholder="Username">
            <input type="password" id="password" placeholder="Password">
            <button class="login-btn" onclick="checkLogin()">Login</button>
            <div class="footer">
                Jika tidak punya akun beli di <span>@ceosung</span>
            </div>
        </div>
    </div>

    <div id="main-dashboard">
        <aside class="sidebar">
            <div class="logo-frame-dash">
                <img src="dmg.logo.png" alt="Logo">
            </div>
            <nav>
                <div class="nav-link active" onclick="switchTab('gta')">üéÆ GTA V SYSTEM</div>
                <div class="nav-link" onclick="switchTab('photos')">üñºÔ∏è BEST PHOTOS</div>
                <div class="nav-link" onclick="switchTab('scripts')">üìú SCRIPTS HUB</div>
                <div class="nav-link" onclick="switchTab('settings')" style="margin-top:auto;">‚öôÔ∏è SETTINGS</div>
            </nav>
        </aside>

        <main class="main-content">
            <div id="tab-gta">
                <div id="view-folders">
                    <div class="header"><h1>GTA V Directory</h1></div>
                    <div class="grid">
                        <div class="folder-card" onclick="openFolder('SOUNDS')"><span class="card-icon">üîä</span><h3>SOUNDS</h3></div>
                        <div class="folder-card" onclick="openFolder('GRAPHICS')"><span class="card-icon">üé¨</span><h3>GRAPHICS</h3></div>
                        <div class="folder-card" onclick="openFolder('KILLEFFECTS')"><span class="card-icon">üíÄ</span><h3>KILL EFFECTS</h3></div>
                        <div class="folder-card" onclick="openFolder('RESHADE')"><span class="card-icon">üé®</span><h3>RESHADE</h3></div>
                    </div>
                </div>
                <div id="view-files" class="hidden">
                    <span class="back-link" onclick="closeFolder()">‚Üê RETURN TO DIRECTORY</span>
                    <div class="header">
                        <h1 id="folderTitle">Folder</h1>
                        <button class="action-btn" onclick="triggerUpload()">+ UPLOAD NEW</button>
                    </div>
                    <div id="fileGrid" class="grid"></div>
                </div>
            </div>

            <div id="tab-photos" class="hidden">
                <div class="header"><h1>Best Photos</h1><button class="action-btn" onclick="document.getElementById('inpPhoto').click()">+ ADD PHOTO</button></div>
                <div id="photoGrid" class="grid"></div>
            </div>

            <div id="tab-scripts" class="hidden"><div class="header"><h1>Scripts Hub</h1></div><div class="grid"><div class="folder-card"><h3>Active</h3></div></div></div>
            <div id="tab-settings" class="hidden"><div class="header"><h1>Settings</h1></div><button class="action-btn" style="background:red; color:white;" onclick="hardReset()">üóëÔ∏è RESET ALL DATA</button></div>
        </main>
    </div>

    <input type="file" id="inpFile" class="hidden" onchange="uploadFile()">
    <input type="file" id="inpVideo" class="hidden" accept="video/*" onchange="uploadVideo()">
    <input type="file" id="inpLink" class="hidden" onchange="linkFile()">
    <input type="file" id="inpPhoto" class="hidden" accept="image/*" onchange="uploadPhoto()">

    <script>
        let db;
        const DB_NAME = 'MasterDB_Final';
        let currentFolder = '';
        let targetId = null;
        let currentTab = 'gta';

        // ŸÜÿ∏ÿßŸÖ ÿßŸÑÿ™ÿ≠ŸÇŸÇ ŸÖŸÜ ÿßŸÑÿØÿÆŸàŸÑ
        function checkLogin() {
            const user = document.getElementById('username').value;
            const pass = document.getElementById('password').value;

            if ((user === "fhad" && pass === "1234") || (user === "feasl" && pass === "1234")) {
                document.getElementById('login-container').style.display = 'none';
                document.getElementById('main-dashboard').style.display = 'flex';
                initDB(); // ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÇÿßÿπÿØÿ© ÿ®ÿπÿØ ÿßŸÑÿØÿÆŸàŸÑ
            } else {
                alert("Wrong Username or Password!");
            }
        }

        // --- ÿ®ÿßŸÇŸä Ÿàÿ∏ÿßÿ¶ŸÅ ÿßŸÑÿØÿßÿ¥ ÿ®Ÿàÿ±ÿØ ÿßŸÑÿ£ÿµŸÑŸäÿ© ---
        function initDB() {
            const request = indexedDB.open(DB_NAME, 1);
            request.onupgradeneeded = (e) => {
                db = e.target.result;
                db.createObjectStore('data', { keyPath: 'id', autoIncrement: true });
            };
            request.onsuccess = (e) => {
                db = e.target.result;
                if(currentTab === 'photos') loadPhotos();
            };
        }

        function switchTab(tab) {
            currentTab = tab;
            ['tab-gta', 'tab-photos', 'tab-scripts', 'tab-settings'].forEach(id => document.getElementById(id).classList.add('hidden'));
            document.querySelectorAll('.nav-link').forEach(n => n.classList.remove('active'));
            document.getElementById('tab-' + tab).classList.remove('hidden');
            event.currentTarget.classList.add('active');
            if(tab === 'gta') closeFolder();
            if(tab === 'photos') loadPhotos();
        }

        function openFolder(name) {
            currentFolder = name;
            document.getElementById('view-folders').classList.add('hidden');
            document.getElementById('view-files').classList.remove('hidden');
            document.getElementById('folderTitle').innerText = name;
            loadFiles();
        }

        function closeFolder() {
            document.getElementById('view-files').classList.add('hidden');
            document.getElementById('view-folders').classList.remove('hidden');
        }

        function triggerUpload() {
            if(currentFolder === 'KILLEFFECTS' || currentFolder === 'SOUNDS') {
                document.getElementById('inpVideo').click();
            } else {
                document.getElementById('inpFile').click();
            }
        }

        function uploadFile() {
            const file = document.getElementById('inpFile').files[0];
            if(!file) return;
            saveToDB({ type: 'file', folder: currentFolder, name: file.name, blob: file });
        }

        function uploadVideo() {
            const file = document.getElementById('inpVideo').files[0];
            if(!file) return;
            saveToDB({ type: 'video', folder: currentFolder, name: file.name, blob: file, linkName: null, linkData: null });
        }

        function uploadPhoto() {
            const file = document.getElementById('inpPhoto').files[0];
            if(!file) return;
            saveToDB({ type: 'photo', folder: 'PHOTOS', name: file.name, blob: file });
        }

        function saveToDB(obj) {
            const reader = new FileReader();
            reader.onload = (e) => {
                obj.dataUrl = e.target.result;
                const tx = db.transaction('data', 'readwrite');
                tx.objectStore('data').add(obj);
                tx.oncomplete = () => {
                    if(obj.type === 'photo') loadPhotos(); else loadFiles();
                };
            };
            reader.readAsDataURL(obj.blob);
        }

        function loadFiles() {
            const grid = document.getElementById('fileGrid');
            grid.innerHTML = '';
            const tx = db.transaction('data', 'readonly');
            tx.objectStore('data').openCursor().onsuccess = (e) => {
                const cursor = e.target.result;
                if(cursor) {
                    const item = cursor.value;
                    if(item.folder === currentFolder) renderFile(item, grid);
                    cursor.continue();
                }
            };
        }

        function renderFile(item, grid) {
            const div = document.createElement('div');
            div.className = 'folder-card';
            if(item.type === 'video') {
                div.innerHTML = `
                    <video src="${item.dataUrl}" class="kill-vid" autoplay loop muted 
                        onmouseover="if('${item.folder}'==='SOUNDS') this.muted=false" 
                        onmouseout="this.muted=true" playsinline></video>
                    <div style="font-size:12px; margin-bottom:5px; color:#aaa;">${item.name}</div>
                    <button class="btn btn-link" onclick="startLink(${item.id})">üîó LINK MOD FILE</button>
                    ${item.linkName ? `<button class="btn btn-dl" onclick="download('${item.linkData}', '${item.linkName}')">üì• DOWNLOAD MOD</button>` : ''}
                    <button class="btn btn-del" onclick="deleteItem(${item.id})">REMOVE</button>`;
            } else {
                div.innerHTML = `<span class="card-icon">üìÑ</span><h3>${item.name}</h3>
                    <button class="btn btn-dl" onclick="download('${item.dataUrl}', '${item.name}')">DOWNLOAD</button>
                    <button class="btn btn-del" onclick="deleteItem(${item.id})">REMOVE</button>`;
            }
            grid.appendChild(div);
        }

        function loadPhotos() {
            const grid = document.getElementById('photoGrid');
            grid.innerHTML = '';
            const tx = db.transaction('data', 'readonly');
            tx.objectStore('data').openCursor().onsuccess = (e) => {
                const cursor = e.target.result;
                if(cursor) {
                    if(cursor.value.type === 'photo') {
                        const item = cursor.value;
                        const div = document.createElement('div');
                        div.className = 'folder-card';
                        div.innerHTML = `<img src="${item.dataUrl}" style="width:100%; height:180px; object-fit:cover; border-radius:15px;">
                            <button class="btn btn-dl" onclick="download('${item.dataUrl}', '${item.name}')">SAVE</button>
                            <button class="btn btn-del" onclick="deleteItem(${item.id})">DELETE</button>`;
                        grid.appendChild(div);
                    }
                    cursor.continue();
                }
            };
        }

        function startLink(id) { targetId = id; document.getElementById('inpLink').click(); }

        function linkFile() {
            const file = document.getElementById('inpLink').files[0];
            if(!file) return;
            const reader = new FileReader();
            reader.onload = (e) => {
                const tx = db.transaction('data', 'readwrite');
                const store = tx.objectStore('data');
                store.get(targetId).onsuccess = (ev) => {
                    const data = ev.target.result;
                    data.linkName = file.name;
                    data.linkData = e.target.result;
                    store.put(data);
                    tx.oncomplete = loadFiles;
                };
            };
            reader.readAsDataURL(file);
        }

        function deleteItem(id) {
            db.transaction('data', 'readwrite').objectStore('data').delete(id).onsuccess = () => {
                if(currentTab === 'photos') loadPhotos(); else loadFiles();
            };
        }

        function download(url, name) {
            const a = document.createElement('a'); a.href = url; a.download = name; a.click();
        }

        function hardReset() { if(confirm("Clear All?")) { indexedDB.deleteDatabase(DB_NAME); location.reload(); } }
    </script>
</body>
</html>